<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>减少动画模式测试 - 网站导航</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        /* 模拟系统禁用动画的设置 */
        @media (prefers-reduced-motion: reduce) {
            .tool-item {
                animation: none !important;
                transition: none !important;
            }
            
            /* 当禁用动画时，确保工具卡片可见 */
            .tool-item {
                opacity: 1 !important;
                transform: translateY(0) !important;
            }
            
            body.loaded .tool-item {
                opacity: 1 !important;
                transform: translateY(0) !important;
            }
        }
        
        /* 测试环境样式 */
        .test-container {
            padding: 20px;
            background: var(--primary-bg, #f5f5f5);
            min-height: 100vh;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            color: var(--text-color, #333);
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            z-index: 1000;
        }
        
        .status-reduced {
            background: #4CAF50;
            color: white;
        }
        
        .status-normal {
            background: #FF9800;
            color: white;
        }
    </style>
</head>
<body>
    <div class="status-indicator" id="status-indicator">
        检测中...
    </div>
    
    <div class="test-container">
        <div class="test-header">
            <h1>减少动画模式测试</h1>
            <p>此页面用于测试在系统禁用动画时的显示效果</p>
            <p>当前状态: <span id="motion-status">检测中...</span></p>
        </div>
        
        <div class="test-grid" id="test-grid">
            <!-- 测试工具卡片将在这里动态生成 -->
        </div>
    </div>
    
    <script>
        // 检测是否启用了减少动画模式
        function detectReducedMotion() {
            const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
            return mediaQuery.matches;
        }
        
        // 更新状态显示
        function updateStatus() {
            const isReducedMotion = detectReducedMotion();
            const statusElement = document.getElementById('status-indicator');
            const motionStatusElement = document.getElementById('motion-status');
            
            if (isReducedMotion) {
                statusElement.textContent = '已启用减少动画模式';
                statusElement.className = 'status-indicator status-reduced';
                motionStatusElement.textContent = '已启用减少动画模式';
                motionStatusElement.style.color = '#4CAF50';
            } else {
                statusElement.textContent = '正常动画模式';
                statusElement.className = 'status-indicator status-normal';
                motionStatusElement.textContent = '正常动画模式';
                motionStatusElement.style.color = '#FF9800';
            }
        }
        
        // 创建测试工具卡片
        function createTestTools() {
            const testGrid = document.getElementById('test-grid');
            const testTools = [
                { name: '百度', url: 'https://www.baidu.com', icon: 'bi-search' },
                { name: 'GitHub', url: 'https://github.com', icon: 'bi-github' },
                { name: 'Stack Overflow', url: 'https://stackoverflow.com', icon: 'bi-stack' },
                { name: 'MDN', url: 'https://developer.mozilla.org', icon: 'bi-book' },
                { name: 'CodePen', url: 'https://codepen.io', icon: 'bi-pen' },
                { name: 'Vue.js', url: 'https://vuejs.org', icon: 'bi-code-slash' },
                { name: 'React', url: 'https://reactjs.org', icon: 'bi-react' },
                { name: 'Node.js', url: 'https://nodejs.org', icon: 'bi-node' }
            ];
            
            testTools.forEach((tool, index) => {
                const toolItem = document.createElement('div');
                toolItem.className = 'tool-item glass-container hover-lift click-bounce';
                toolItem.style.setProperty('--index', index);
                
                const linkElement = document.createElement('a');
                linkElement.href = tool.url;
                linkElement.target = '_blank';
                linkElement.rel = 'noopener noreferrer';
                linkElement.title = tool.name;
                
                linkElement.innerHTML = `
                    <i class="bi ${tool.icon} tool-icon" style="font-size: 48px; margin-bottom: 15px; color: var(--accent-color, #00f6ff);"></i>
                    <div class="tool-name">${tool.name}</div>
                `;
                
                toolItem.appendChild(linkElement);
                testGrid.appendChild(toolItem);
            });
        }
        
        // 模拟 body.loaded 状态
        function simulateLoadedState() {
            setTimeout(() => {
                document.body.classList.add('loaded');
            }, 100);
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus();
            createTestTools();
            simulateLoadedState();
            
            // 监听减少动画模式的变化
            const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
            mediaQuery.addEventListener('change', updateStatus);
        });
        
        // 提供手动切换测试功能
        function toggleReducedMotion() {
            const style = document.createElement('style');
            style.textContent = `
                @media (prefers-reduced-motion: reduce) {
                    .tool-item {
                        opacity: 1 !important;
                        transform: translateY(0) !important;
                    }
                }
            `;
            document.head.appendChild(style);
            updateStatus();
        }
    </script>
</body>
</html>